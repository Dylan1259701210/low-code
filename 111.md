
# Pylint AI辅助解决界面设计说明

**文档生成日期：2025年12月16日**
**设计目标：** 创建一个现代、专业、高效的AI辅助代码问题解决界面，用于展示Pylint问题列表、详情并提供用户决策功能。

## 设计需求

### 设计主题
现代简约风格的企业级代码质量工具界面，用于展示Pylint静态代码检查问题列表，并提供AI生成的解决方案详情供用户审核与决策。

### 适配设备
PC网页端，标准宽度：1440px（适应企业开发人员在桌面环境的使用场景）
高度根据内容自适应，确保核心信息在一屏内完整展示。

### 页面布局结构
整个界面采用单页面应用设计，包含两个核心视图：问题列表视图和问题详情抽屉视图。

**顶部操作区（固定高度约80px）：**
- 左侧：页面标题“Pylint Issue Resolver”，采用较大字号加粗
- 右侧：操作按钮区域，参考SAS界面风格
  - 主操作按钮：“Refresh Issues”（红色背景，圆角矩形）
  - 次要操作按钮：“Filter”（浅色背景，深色边框）
  - 用户头像/设置入口（小尺寸圆形图标）

**主体内容区（自适应高度）：**
采用卡片式布局，分为左右两个主要区域：

1. **左侧主区域 - 问题列表（占宽度70%）：**
   - 列表标题栏：显示“Pylint Issues”和问题总数
   - 状态筛选标签：参考SAS界面的Legend设计，横向排列
     - INIT（灰色）：初始状态
     - IN_PROGRESS（蓝色带循环箭头）：AI处理中
     - PENDING_USER_ACTION（黄色）：等待用户操作
     - ACCEPTED（绿色带对勾）：已接受
     - REJECTED（红色带关闭图标）：已拒绝
   - 问题列表表格：采用与SAS界面类似的表格设计
     - 列定义（从左到右）：
       - **Status（状态）**：显示状态标签（颜色+文字+图标）
       - **Issue ID/Code（问题标识）**：如"E0602"等Pylint错误码
       - **File Path（文件路径）**：发生问题的文件路径，可截断显示
       - **Description（问题描述）**：简要描述问题内容
       - **Severity（严重程度）**：错误/警告/信息等级别标签
       - **Action（操作）**："View Details"按钮（蓝色文字链接样式）

2. **右侧抽屉区域 - 问题解决详情（占宽度30%，默认隐藏）：**
   - 触发方式：点击列表中的"View Details"按钮时从右侧滑出
   - 抽屉头部：固定高度，包含
     - 问题标题（如"Pylint Issue: E0602"）
     - 关闭按钮（"X"图标）
   - 抽屉内容区（可滚动）：
     - **Issue Summary（问题摘要）**：详细的问题描述、代码位置、影响分析
     - **AI Recommendation（AI建议）**：AI生成的解决方案说明
     - **Prompt Logs（提示日志）**：可折叠区域，展示AI生成过程的日志
     - **Code Diff View（代码差异视图）**：左右对比显示原代码和AI建议修改后的代码
   - 抽屉底部（固定）：
     - 操作按钮组：
       - "Accept"按钮（绿色背景，左侧带对勾图标）
       - "Decline"按钮（红色背景，左侧带关闭图标）
       - "Skip"按钮（灰色边框，次要操作）

**底部信息区（固定高度约40px）：**
- 左侧：显示最后更新时间
- 右侧：系统状态指示器（如"后端连接正常"）

### 颜色方案
参考SAS界面的专业配色，调整以符合代码审查场景：

- **主色调**：科技蓝(#1890FF)，用于主标题、高亮链接、选中状态
- **操作色**：警示红(#FF4D4F)，用于重要操作按钮（如Refresh），与SAS界面"Create Workspace"按钮保持一致
- **状态色系统**：
  - INIT/默认：中性灰(#D9D9D9)
  - IN_PROGRESS：处理中蓝(#1890FF)，带动态效果
  - PENDING_USER_ACTION：待操作黄(#FAAD14)
  - ACCEPTED：成功绿(#52C41A)，参考流程图中的"CheckedOutlined, Green"
  - REJECTED：错误红(#FF4D4F)，参考流程图中的"closeCircle, Red"
- **文件类型标签色**（适配场景）：
  - 严重错误：红色背景(#FF4D4F)，白色文字
  - 警告：橙色背景(#FA8C16)，白色文字
  - 信息：蓝色背景(#1890FF)，白色文字
- **背景与文字**：
  - 主背景：浅灰色(#F5F5F5)
  - 卡片背景：纯白色(#FFFFFF)
  - 主标题文字：深灰(#262626)
  - 正文文字：中灰(#595959)
  - 辅助文字：浅灰(#8C8C8C)
  - 边框/分割线：极浅灰(#F0F0F0)

### 排版和字体
采用无衬线字体，确保代码显示清晰：

- **字体家族**：优先使用系统字体栈：-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif
- **标题层级**：
  - H1/页面标题：20px，字重600，颜色#262626
  - H2/区域标题：16px，字重600，颜色#262626
  - H3/卡片标题：14px，字重600，颜色#595959
- **正文文字**：
  - 标准正文：14px，字重400，颜色#595959，行高1.5
  - 表格内容：13px，字重400，颜色#595959
  - 代码字体：13px，等宽字体（如'Monaco', 'Menlo', 'Consolas', monospace）
- **辅助信息**：
  - 标签文字：12px，字重400，根据状态色变化
  - 按钮文字：14px，字重500
  - 提示文字：12px，颜色#8C8C8C

### 组件和元素

**1. 按钮组件：**
- **主操作按钮**（如Refresh）：红色背景(#FF4D4F)，白色文字，6px圆角，内边距8px 16px，无边框，悬停时加深红色
- **次要按钮**（如Filter）：白色背景，灰色边框(#D9D9D9)，灰色文字，6px圆角
- **状态操作按钮**：
  - Accept按钮：绿色背景(#52C41A)，白色文字，左侧对勾图标
  - Decline按钮：红色背景(#FF4D4F)，白色文字，左侧关闭图标
  - Skip按钮：透明背景，灰色边框，灰色文字
- **文本链接按钮**（如View Details）：蓝色文字(#1890FF)，无背景，悬停下划线

**2. 卡片/容器：**
- **主内容卡片**：白色背景，1px边框(#F0F0F0)，8px圆角，轻微投影（0 2px 8px rgba(0,0,0,0.08)），内边距16px
- **抽屉面板**：白色背景，左侧1px边框(#F0F0F0)，全高度，宽度30%，固定定位，滑入动画
- **表格行**：交替行背景色（默认白色，偶数行#FAFAFA），悬停时浅蓝色背景(#E6F7FF)

**3. 状态标签：**
- 设计规范：8px圆角，内边距4px 8px，字体12px，白色文字
- 每种状态对应特定背景色（见颜色方案）
- 处理中状态(IN_PROGRESS)添加旋转箭头图标动画

**4. 代码差异视图：**
- 左右分栏布局，各占50%
- 左侧："Original Code"（原代码），浅红色背景标记问题行
- 右侧："AI Suggested Fix"（AI建议），浅绿色背景标记修改行
- 行号显示，更改行高亮显示

**5. 表单元素：**
- 输入框：1px边框(#D9D9D9)，4px圆角，内边距8px 12px，悬停时边框变蓝
- 下拉筛选：与输入框一致，右侧下拉箭头

### 交互效果

**1. 核心流程交互（严格遵循流程图）：**
- **初始化加载**：进入页面时自动调用API获取INIT状态的问题列表
- **状态轮询**：对IN_PROGRESS状态的问题，前端每5秒轮询后端API检查状态更新
- **状态更新**：当问题状态变为PENDING_USER_ACTION时，列表中的状态标签自动更新，操作列显示"View Details"
- **用户决策**：
  - 用户可接受(ACCEPT)或拒绝(REJECT)PENDING状态的解决方案
  - 已拒绝的解决方案，用户仍可再次接受（"User can still accept rejected resolution detail"）
  - 已接受的解决方案，用户不可拒绝（"User cannot reject an accepted resolution"）
  - 接受后状态变为ACCEPTED，显示绿色对勾图标
  - 拒绝后状态变为REJECTED，显示红色关闭图标

**2. 界面交互：**
- 抽屉滑入/滑出：点击"View Details"时右侧抽屉滑入，点击关闭按钮或外部遮罩时滑出
- 状态筛选：点击状态标签可筛选列表显示对应状态的问题
- 行悬停效果：表格行悬停时背景色变化，操作按钮更明显
- 加载状态：API调用时显示旋转加载图标

**3. 无复杂动画**：专注于功能实现和用户体验，不添加非必要的复杂动画效果。

### 边界处理
- **页面边界**：作为PC单页面应用，不添加整体边框，依靠卡片投影和背景色区分层次
- **背景色区分**：HTML背景色设置为浅灰色(#F5F5F5)，主内容区卡片为白色(#FFFFFF)，形成清晰对比
- **响应式考虑**：在1440px宽度下优化显示，最小支持1200px宽度，小于1200px时考虑简化布局
- **内容溢出**：长文件路径和问题描述使用省略号截断，鼠标悬停显示完整内容

### 数据与API集成说明

**前端需要集成的关键状态：**
1. `status=INIT` - 初始状态，仅显示问题基本信息
2. `status=IN_PROGRESS` - AI处理中，显示加载动画，自动轮询
3. `status=PENDING_USER_ACTION` - 解决方案就绪，等待用户操作
4. `status=ACCEPTED` - 用户已接受解决方案
5. `status=REJECTED` - 用户已拒绝解决方案

**API端点参考：**
- `GET /api/pylint/issues` - 获取问题列表（支持状态筛选）
- `GET /api/pylint/issues/{id}/resolution` - 获取特定问题的解决方案详情
- `POST /api/pylint/issues/{id}/accept` - 接受解决方案
- `POST /api/pylint/issues/{id}/reject` - 拒绝解决方案

**轮询机制：**
- 仅对`status=IN_PROGRESS`的问题进行轮询
- 轮询间隔：5秒
- 轮询停止条件：状态变为非IN_PROGRESS

### 可访问性考虑
- 所有交互元素具备足够的点击区域（最小44×44px）
- 颜色对比度符合WCAG AA标准
- 为图标按钮提供aria-label描述
- 键盘导航支持：Tab键可遍历所有交互元素
